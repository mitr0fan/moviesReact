(this["webpackJsonpmy-react"]=this["webpackJsonpmy-react"]||[]).push([[0],{31:function(e,t,a){e.exports=a(52)},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},43:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),s=(a(36),a(2)),i=a(3),l=a(5),u=a(4),p=a(6),m=(a(37),a(11)),h=a(15),d=(a(38),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("svg",{className:"spinner",viewBox:"0 0 50 50"},r.a.createElement("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"})))}}]),t}(r.a.Component)),v=a(12),E=(a(43),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={hasError:!1,error:null},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"deleteError",value:function(){this.setState({hasError:!1,error:null})}},{key:"render",value:function(){var e=this;return this.state.hasError?r.a.createElement("div",{className:"error"},this.state.error.name,r.a.createElement(m.b,{to:"/"},r.a.createElement("button",{className:"button",onClick:function(){return e.deleteError()}},"Back to main page"))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),t}(r.a.Component)),f=a(8),b=a(18);a(45);function y(e){return{type:"GET_MOVIES",payload:e}}function O(e){return{type:"CHANGE_SEARCH_TYPE",payload:e}}function _(e){return{type:"GET_UNSORTED_MOVIES",payload:e}}function j(e){return{type:"CHANGE_SORT_TYPE",payload:e}}function N(e){return{type:"SELECT_MOVIE",payload:e}}function g(e){return{type:"CHANGE_LOADING_STATUS",payload:e}}var T="https://reactjs-cdp.herokuapp.com/movies",k="title",M="genres",C="rating",S="date";function I(e){return z.dispatch(g(!0)),fetch(e).then((function(e){return e.json()}),(function(e){return console.warn(e)}))}a(46);var B=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"amount-panel"},r.a.createElement("div",{className:"panel-container"},r.a.createElement("span",{className:"amount-panel__count"},this.props.count," movies found"),r.a.createElement("span",null,"Sort by"),r.a.createElement("div",{className:"date"===this.props.sortType?"amount-panel__sort-date amount-panel__sort-date_active":"amount-panel__sort-date",onClick:function(){return e.props.sortBy(S)}},"release date"),r.a.createElement("div",{className:"rating"===this.props.sortType?"amount-panel__sort-rating amount-panel__sort-rating_active":"amount-panel__sort-rating",onClick:function(){return e.props.sortBy(C)}},"rating")))}}]),t}(r.a.Component),w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).inputValue="",a.handlerInput=a.handlerInput.bind(Object(b.a)(a)),a.sortBy=a.sortBy.bind(Object(b.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handlerInput",value:function(e){var t=e.target;this.inputValue=t.value}},{key:"handlerSearchButton",value:function(){var e=this,t="?search=".concat(this.inputValue,"&searchBy=").concat(this.props.searchType);I(T+t).then((function(t){e.props.dispatch(y(Object(f.a)(t.data))),e.props.dispatch(_(Object(f.a)(t.data))),""!==e.props.sortType&&e.props.dispatch(j(""))})).finally((function(){return e.props.dispatch(g(!1))}))}},{key:"searchByTitle",value:function(){this.props.dispatch(O(k))}},{key:"searchByGenre",value:function(){this.props.dispatch(O(M))}},{key:"sortFunction",value:function(e){return e===S?this.props.movies.sort((function(e,t){return new Date(t.release_date).getTime()-new Date(e.release_date).getTime()})):e===C?this.props.movies.sort((function(e,t){return t.vote_average-e.vote_average})):void 0}},{key:"sortBy",value:function(e){if(this.props.sortType!==e){this.props.dispatch(j(e));var t=this.sortFunction(e);this.props.dispatch(y(Object(f.a)(t)))}else this.props.dispatch(j("")),this.props.dispatch(y(Object(f.a)(this.props.unsortedMovies)))}},{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__content"},r.a.createElement("span",{className:"header__app-name"},"Movies"),r.a.createElement("span",{className:"header__input-name"},"Find your movie"),r.a.createElement("div",{className:"header__input-field"},r.a.createElement("input",{className:"header__input",type:"text",onChange:this.handlerInput})),r.a.createElement("div",{className:"header__buttons"},r.a.createElement("span",null,"SEARCH BY"),r.a.createElement("button",{className:"title"===this.props.searchType?"button button_active":"button",onClick:function(){return e.searchByTitle()}},"TITLE"),r.a.createElement("button",{className:"genres"===this.props.searchType?"button button_active":"button",onClick:function(){return e.searchByGenre()}},"GENRE"),r.a.createElement("div",{className:"empty"}),r.a.createElement("button",{className:"button button_search",onClick:function(){return e.handlerSearchButton()}},"SEARCH")))),r.a.createElement(B,{count:this.props.movies.length,sortBy:this.sortBy,sortType:this.props.sortType}))}}]),t}(r.a.Component);var A=Object(v.b)((function(e){return{searchType:e.searchType,movies:e.movies,unsortedMovies:e.unsortedMovies,sortType:e.sortType}}))(w),G=(a(47),a(48),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.movie;return r.a.createElement(m.b,{to:"/movie/".concat(t.id)},r.a.createElement("div",{className:"film-item",onClick:function(){return e.props.selectMovie(t.id)}},r.a.createElement("img",{src:t.poster_path,className:"film-item__poster",alt:"Poster"}),r.a.createElement("span",{className:"film-item__title"},t.title),r.a.createElement("span",{className:"film-item__release"},t.release_date.slice(0,4)),r.a.createElement("span",{className:"film-item__genres"},t.genres.join(" & "))))}}]),t}(r.a.Component)),D=a(30);var F=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.selectedMovie||I(T).then((function(t){e.props.dispatch(y(Object(f.a)(t.data))),e.props.dispatch(_(Object(f.a)(t.data)))})).finally((function(){return e.props.dispatch(g(!1))}))}},{key:"selectMovie",value:function(e){var t=this;this.props.dispatch(j("")),this.props.dispatch(function(e){return{type:"SELECT_MOVIE_ID",payload:e}}(e));var a="/".concat(e);I(T+a).then((function(e){t.props.dispatch(N(e));var a="?search=".concat(e.genres[0],"&searchBy=").concat(M);I(T+a).then((function(e){t.props.dispatch(y(Object(f.a)(e.data))),t.props.dispatch(_(Object(f.a)(e.data)))}))})).finally((function(){return t.props.dispatch(g(!1))}));var n=setInterval((function(){window.scrollBy(0,-70),0===window.scrollY&&clearInterval(n)}),1e3/60)}},{key:"render",value:function(){var e=this;return this.props.movies.length>0?r.a.createElement(D.a,{className:"films-container"},this.props.movies.map((function(t){return r.a.createElement(G,{key:t.id.toString(),movie:t,selectMovie:e.selectMovie.bind(e)})}))):r.a.createElement("div",{className:"films-container"},"FILMS NOT FOUND")}}]),t}(r.a.Component),H=Object(v.b)((function(e){return{movies:e.movies,selectedMovie:e.selectedMovie}}))(F),V=(a(49),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=(new Date).getFullYear();return r.a.createElement("div",{className:"container-footer"},r.a.createElement("footer",{className:"footer"},"Movies, ",e))}}]),t}(r.a.Component)),P=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(A,null),r.a.createElement(H,null),r.a.createElement(V,null))}}]),t}(r.a.Component),R=(a(50),a(51),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"error"},"PAGE NOT FOUND",r.a.createElement(m.b,{to:"/"},r.a.createElement("button",{className:"button"},"Back to main page")))}}]),t}(r.a.Component)),L=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.selectedMovie;return t?r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"selected-movie"},r.a.createElement("div",{className:"selected-movie__content"},r.a.createElement("div",{className:"selected-movie__head"},r.a.createElement("span",{className:"selected-movie__app-name"},"Movies"),r.a.createElement(m.b,{to:"/"},r.a.createElement("button",{className:"button",onClick:function(){return e.props.backToMainPage()}},"SEARCH"))),r.a.createElement("div",{className:"selected-movie__content-container"},r.a.createElement("img",{src:t.poster_path,alt:"Poster",className:"selected-movie__poster"}),r.a.createElement("div",{className:"selected-movie__info"},r.a.createElement("div",{className:"selected-movie__title-rating"},r.a.createElement("span",{className:"selected-movie__title"},t.title),r.a.createElement("span",{className:"selected-movie__rating"},t.vote_average)),r.a.createElement("div",{className:"selected-movie__date-duration"},r.a.createElement("span",null,t.release_date.slice(0,4)),r.a.createElement("span",null,t.runtime," min")),r.a.createElement("div",{className:"selected-movie__overview"},t.overview))))),r.a.createElement("div",{className:"movies-genre"},r.a.createElement("div",{className:"movies-genre__genre"},"Movies by ",this.props.selectedMovie.genres[0]," genre"))):r.a.createElement(R,null)}}]),t}(r.a.Component),Y=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(!this.props.selectedMovie){var t=this.props.match.params.id;I(T+"/".concat(t)).then((function(t){if(t.title){e.props.dispatch(N(t));var a="?search=".concat(t.genres[0],"&searchBy=genres");I(T+a).then((function(t){e.props.dispatch(y(Object(f.a)(t.data))),e.props.dispatch(_(Object(f.a)(t.data)))}))}})).finally((function(){return e.props.dispatch(g(!1))}))}}},{key:"backToMainPage",value:function(){this.props.dispatch(g(!1)),this.props.dispatch(_(Object(f.a)(this.props.movies)))}},{key:"render",value:function(){return isNaN(+this.props.match.params.id)?r.a.createElement(R,null):r.a.createElement(n.Fragment,null,r.a.createElement(L,{backToMainPage:this.backToMainPage.bind(this),selectedMovie:this.props.selectedMovie}),r.a.createElement(H,null),r.a.createElement(V,null))}}]),t}(r.a.Component);var x=Object(v.b)((function(e){return{selectedMovie:e.selectedMovie,movies:e.movies}}))(Y),U=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"loadingComponent",value:function(){if(this.props.loadingStatus)return r.a.createElement(d,null)}},{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(E,null,this.loadingComponent(),r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/",exact:!0,component:P}),r.a.createElement(h.a,{path:"/movie/:id",exact:!0,component:x}),r.a.createElement(h.a,{component:R}),r.a.createElement(h.a,{path:"/movie/:id/*",component:R}))))}}]),t}(r.a.Component);var W=Object(v.b)((function(e){return{loadingStatus:e.loadingStatus}}))(U);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=a(21),$=a(14),q={movies:[],searchType:k,unsortedMovies:[],sortType:"",movieId:null,selectedMovie:null,loadingStatus:!1};a.d(t,"store",(function(){return z}));var z=Object(J.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MOVIES":case"SEARCH_MOVIES":return Object($.a)({},e,{movies:t.payload});case"CHANGE_SEARCH_TYPE":return Object($.a)({},e,{searchType:t.payload});case"GET_UNSORTED_MOVIES":return Object($.a)({},e,{unsortedMovies:t.payload});case"CHANGE_SORT_TYPE":return Object($.a)({},e,{sortType:t.payload});case"SELECT_MOVIE_ID":return Object($.a)({},e,{movieId:t.payload});case"SELECT_MOVIE":return Object($.a)({},e,{selectedMovie:t.payload});case"CHANGE_LOADING_STATUS":return Object($.a)({},e,{loadingStatus:t.payload});default:return e}}));o.a.render(r.a.createElement(v.a,{store:z},r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.8db3e980.chunk.js.map